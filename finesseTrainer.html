<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetris Finesse Trainer</title>
    <link rel="stylesheet" href="finesseTrainer.css">
    <script src="https://kit.fontawesome.com/910ee35d95.js" crossorigin="anonymous"></script>
</head>
<body>
    <header id="header">
        <span id="title">Finesse Trainer</span>
        <i id="info" class="fa-solid fa-circle-info fa-lg"></i>
    </header>
    <div id="content">
        <canvas id="tetrisBoard"></canvas>
        <div id="right-panel">
            <div class="side-box" id="score">
                <h2 class="panel-heading">Score</h2>
                <div>Streak: <span id="streak"></span></div>
                <div>Best Streak: <span id="best-streak"></span></div>
            </div>
            <div class="side-box" id="settings">
                <h2 class="panel-heading">Settings</h2>
                <div id="controls" class="tab-content">
                    <h3>Controls</h3>
                    <div class="settings-row">
                        <label for="left-input">Move left:</label>
                        <input id="left-input" class="controls-input" type="input" type="text" value="a">
                    </div>
                    <div class="settings-row">
                        <label for="right-input">Move right:</label>
                        <input id="right-input" class="controls-input" type="input" type="text" value="a">
                    </div>
                    <div class="settings-row">
                        <label for="hard-drop-input">Hard drop:</label>
                        <input id="hard-drop-input" class="controls-input" type="input" type="text" value="a">
                    </div>
                    <div class="settings-row">
                        <label for="ccw-input">Rotate left:</label>
                        <input id="ccw-input" class="controls-input" type="input" type="text" value="a">
                    </div>
                    <div class="settings-row">
                        <label for="cw-input">Rotate right:</label>
                        <input id="cw-input" class="controls-input" type="input" type="text" value="a">
                    </div>
                    <div class="settings-row">
                        <label forj="180-input">Rotate 180</label>
                        <input id="180-input" class="controls-input" type="input" type="text" value="a">
                    </div>
                </div>
                <div id="handling" class="tab-content">
                    <h3>Handling</h3>
                    <div class="settings-row">
                        <label for="ARR-input">ARR: </label>
                        <input type="number" min="0" max="100" value="33" id="ARR-input">
                    </div>
                    <div class="settings-row">
                        <label for="DAS-input">DAS: </label>
                        <input type="number" min="0" max="500" value="166" id="DAS-input">
                    </div>
                    <div>
                        <label for="ghost-box">Ghost Piece:</label>
                        <input type="checkbox" id="ghost-box">
                    </div>
                    <div>
                        <label for="grid-box">Show Grid:</label>
                        <input type="checkbox" id="grid-box">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <dialog id="modal" data-modal>
        <i id="popup-x" class="fa-solid fa-xmark fa-lg"></i>
        <h1>About</h1>
        <p>This is an online training application meant to help tetris players improve their "finesse" in a
            simple environment.
        </p>
        <h2>What is finesse?</h2>
        <p>Finesse is a system of inputs that allows a player to place a piece in the desired location and rotation in the least amount 
            of keypresses. By combining a sequence of tapped, single block movements and held, automatic movements (DAS), it is possible
            to place a piece in any place on the board in only two or less inputs.
        </p>
        <p>
            Learn more about finesse <a href="https://four.lol/mid-game/finesse">here</a>. 
        </p>
        <h2>How to Play</h2>
        <p>Use the keyboard to move and rotate each piece so that it fits snugly against the gray "junk" pieces.
            Once the piece is in position, drop the piece into place. If incorrect finesse inputs were used, the piece will be
            reset, and you will be able to retry until the correct inputs are used.
        </p>
        <h2>DAS</h2>
        <p>Delayed Auto Shift, or DAS, is the amount of time in milliseconds a left or right input is held before it starts rapidly repeating.
            Avoid setting this too low, or you risk accidentally getting a DAS when you only meant to move a single space.
        </p>
        <h2>ARR</h2>
        <p>
            The amount of time in milliseconds before the held input repeats during a DAS. A lower ARR setting allows for faster play and is
            generally better. Some games don't allow this to be modified, so it may be useful to practice with a higher ARR
            if your goal is to get better at one of those.
        </p>
        <h3>Credits</h3>
        <p>Created by Alexander Johnson. Code is open source and available on <a href="https://github.com/alexjohnson0123/FinesseTrainer">GitHub</a>.</p>
    </dialog>
    <script>
        // Script for opening and closing info dialog
        const openButton = document.getElementById("info");
        const closeButton = document.getElementById("popup-x");
        const modal = document.getElementById("modal");

        openButton.addEventListener("click", () => {
            modal.showModal();
        });
        closeButton.addEventListener("click", () => {
            modal.close();
        })
    </script>
<script src="finesseTrainer.js"></script>
</body>
</html>